var define,require,JS_TRANSITION,CSS_TRANSITION,JS_TRANSFORM,CSS_TRANSFORM,JS_TRANSITION_DURATION,TRANSITION_END,JS_PERSPECTIVE,JS_TRANSFORM_STYLE,JS_BACKFACE_VISIBILITY,docBodyStyle,browserCore,IS_MOBILE;(function(e,t){e.mfeng==t&&(e.mfeng={});var n={};define=function(e,t){if(n[e])throw Error("module "+e+" already defined!");n[e]={id:e,factory:t}},require=function(e){var t=n[e];if(!t)throw Error("module "+e+" not found!");return t.factory&&(e=t.factory,t.exports={},delete t.factory,e(require,t.exports,t)),t.exports}})(window),define("util",function(e,t){var n={toString:function(e){return Object.prototype.toString.call(e)},isFunction:function(e){return e&&"[object Function]"===n.toString(e)},isPlainObject:function(e){return e&&"[object Object]"===n.toString(e)},isArray:function(e){return n.isFunction(Array.isArray)?Array.isArray(e):e&&"[object Array]"===n.toString(e)},mix:function(e,t,r){r=!1===r?!1:!0;var i,s,o;for(i in t)o=t[i],s=e[i],r&&(n.isArray(o)||n.isPlainObject(o))?(s=e[i]=s&&(n.isArray(s)||n.isPlainObject(s))?s:n.isArray(s)?[]:{},n.mix(s,o,r)):e[i]=o;return e},clone:function(e){return n.mix({},e)},apply:function(e,t,r){return r&&n.apply(e,r),n.mix(e,t)},bind:function(){var e=arguments[0],t=arguments[1],n=Array.prototype.splice.call(arguments,2);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}},addClass:function(e,t){var n=e.className.split(" ");if(-1<n.indexOf(t))return!1;n.push(t),e.className=n.join(" ")},removeClass:function(e,t){var n=e.className.split(" "),r=n.indexOf(t);if(-1>=r)return!1;n.splice(r,1),e.className=n.join(" ")},hasClass:function(e,t){return-1<(" "+e.className+" ").replace(/[\t\r\n]/g," ").indexOf(" "+t+" ")?!0:!1},observe:function(e){e.__listeners={},e.on=function(e,t,n){void 0===this.__listeners[e]&&(this.__listeners[e]=[]),this.__listeners[e].push({eventName:e,handler:t,host:n||this})},e.fire=function(e){if(void 0===this.__listeners[e])return!1;var t=this.__listeners[e],n,r=0,i=this.__listeners[e].length,s=Array.prototype.slice.call(arguments,1);for(s.unshift(e);r<i;r++)n=t[r],n.handler.apply(n.host,s)}},move:function(e,t,n){e.style[JS_TRANSFORM]="opera"===browserCore?"translate("+t+"px, "+n+"px)":"translate3d("+t+"px, "+n+"px, 0)"},getPosition:function(){return{x:document.body.scrollLeft,y:document.body.scrollTop}},listen:function(e,t,n){document.all?e.attachEvent(t,n):e.addEventListener(t,n,!1)},setTransition:function(e,t,n,r,i){if(void 0===e)throw"parameter el must be give!";e.style[JS_TRANSITION]=(void 0===t?"all":t)+" "+(void 0===n?250:n)+"ms "+(void 0===r?"ease":r)+" "+(void 0===i?0:i)+"ms";if("webkit"===browserCore||"moz"===browserCore)e.style[JS_TRANSFORM_STYLE]="preserve-3d",e.style[JS_PERSPECTIVE]="1",e.style[JS_BACKFACE_VISIBILITY]="hidden"},initEnv:function(){JS_TRANSITION,CSS_TRANSITION,JS_TRANSFORM,CSS_TRANSFORM,JS_TRANSITION_DURATION,TRANSITION_END,JS_PERSPECTIVE,JS_TRANSFORM_STYLE,JS_BACKFACE_VISIBILITY,docBodyStyle=document.body.style,browserCore=void 0!==docBodyStyle.webkitTransition&&"webkit"||void 0!==docBodyStyle.MozTransition&&"moz"||void 0!==docBodyStyle.OTransition&&"opera"||void 0!==docBodyStyle.transition&&"orign"||void 0!==docBodyStyle.msTransform&&"ms",IS_MOBILE="ontouchstart"in window;switch(browserCore){case"orign":JS_TRANSITION=CSS_TRANSITION="transition",JS_TRANSFORM=CSS_TRANSFORM="transform",JS_TRANSITION_DURATION="transitionDuration",TRANSITION_END="transitionEnd";break;default:JS_TRANSITION="webkitTransition",CSS_TRANSITION="-webkit-transition",JS_TRANSFORM="webkitTransform",CSS_TRANSFORM="-webkit-transform",JS_TRANSITION_DURATION="webkitTransitionDuration",TRANSITION_END="webkitTransitionEnd",JS_PERSPECTIVE="webkitPerspective",JS_TRANSFORM_STYLE="webkitTransformStyle",JS_BACKFACE_VISIBILITY="webkitBackfaceVisibility";break;case"moz":JS_TRANSITION="MozTransition",CSS_TRANSITION="-moz-transition",JS_TRANSFORM="MozTransform",CSS_TRANSFORM="-moz-transform",JS_TRANSITION_DURATION="MozTransitionDuration",TRANSITION_END="transitionend",JS_PERSPECTIVE="MozPerspective",JS_TRANSFORM_STYLE="MozTransformStyle",JS_BACKFACE_VISIBILITY="MozBackfaceVisibility";break;case"opera":JS_TRANSITION="OTransition",CSS_TRANSITION="-o-transition",JS_TRANSFORM="OTransform",CSS_TRANSFORM="-o-transform",JS_TRANSITION_DURATION="OTransitionDuration",TRANSITION_END="oTransitionEnd";break;case"ms":JS_TRANSITION="MSTransition",CSS_TRANSITION="-ms-transition",JS_TRANSFORM="msTransform",CSS_TRANSFORM="-ms-transform",JS_TRANSITION_DURATION="MSTransitionDuration",TRANSITION_END="msTransitionEnd"}},stopBubble:function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},stopDefault:function(e){return e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1,!1},getUserAgent:function(){return navigator.userAgent.toLowerCase()},hideBar:function(){var e=this.getUserAgent();(0>e.indexOf("android")||0<=e.indexOf("qq"))&&window.scrollTo(0,1)}};n.mix(t,n)}),define("widget",function(e,t){function n(){this.init.apply(this,arguments)}function r(e,t,n,r){a.observe(this),this._el=document.getElementById(e),this._size=t,this._activeClassName=n,this._items=Array.prototype.slice.call(this._el.children),!0===r&&this._el.addEventListener("click",a.bind(this,this.clickHandler),!1)}function s(e){a.observe(this);if(!e||!e.id)throw Error("id is required!");a.apply(this,e||{},s.DEFAULT_CONFIG),this._el=document.getElementById(this.id),this._btnClose=this._el.getElementsByClassName(this.closeBtnClass)[0],this._wrapper=this._el.getElementsByClassName(this.wrapperClass)[0],this._transitionLock=!1,a.listen(window,"scroll",a.bind(this,this._scrollHandler)),a.listen(this._wrapper,"click",a.bind(this,this._wrapperClkHandler)),a.listen(this._btnClose,"click",a.bind(this,this._closeClkHandler)),this._init(),this._listener(),this._applyStyle()}function o(){this._init.apply(this,arguments)}function u(){this._init.apply(this,arguments)}var a=e("util");a.initEnv(),n.DEFAULT_CONFIG={direction:"h",isAutoPlay:!1,isCircularly:!1,isTouchMove:!0,defaultPageIndex:0,showPageNumber:1,speed:400,interval:3e3,onStart:function(){},onScrollEnd:function(){}},n.MIN_MOVEMENT=30,n.status={TOUCH:"__touch__",TOUCH_END:"__touchend__",SLIDING:"__sliding__",FIRST_BLOCK:1,SECOND_BLOCK:2},n.prototype={init:function(e){if(!e||!e.id)throw Error("id is required!");a.apply(this,e||{},n.DEFAULT_CONFIG),this._el=document.getElementById(this.id),this._content=this._el.innerHTML,this._pages=Array.prototype.slice.call(this._el.children).length,this._currentPage=this.defaultPageIndex,this._initDom(),this._applyStyle(),a.bind(this,this.onStart)(),this._bindEvent();if(this.indicator){a.apply(this.indicator,{size:this._pages}),e=r.create(this.indicator);var t=this,i=function(e,n){t.isAutoPlay&&t.replay(),t.pageTo(n)};!0===this.indicator.controllable&&e.on("change",i),this.setIndicator(e)}this._initStatus(),this.isAutoPlay&&1<this._pages&&this.play()},_initDom:function(){this._wrapper=document.createElement("div"),this.isCircularly?(this._wrapper=document.createElement("div"),this._firstBlock=n.status.FIRST_BLOCK,this._secondBlock=n.status.SECOND_BLOCK,this._wrapper.innerHTML=this._content+this._content):(this._wrapper.innerHTML=this._content,this._firstBlock=this._secondBlock=null),this._el.innerHTML="",this._el.appendChild(this._wrapper)},_applyStyle:function(){var e=this.pageWidth*this._pages,t=this.isCircularly?2:1;this._el.style.overflow="hidden";if("h"===this.direction){this._wrapper.style.width=t*e+"px",this._activePages=Array.prototype.slice.call(this._wrapper.children),len=this._activePages.length;for(i=0;i<len;i++)this._activePages[i].style.width=this.pageWidth+"px"}else this._wrapper.style.width="100%",this._wrapper.style.height=t*e+"px";a.setTransition(this._wrapper,CSS_TRANSFORM,this.speed)},_initStatus:function(){this.isCircularly?(this._frames=2*this._pages,this._activeBlock=this._secondBlock,this.isLastFrame()&&this._switchBlock()):this._frames=this._pages,this._currentFrame=0,1<this._pages&&(this.resetTo(this.defaultPageIndex),this._indicator&&this._indicator.active(this._currentPage)),this._isPageLock=this._isTouchLock=!1},isFirstPage:function(){return 0==this._currentPage},isLastPage:function(){return this._currentPage==this._pages-1},isFirstFrame:function(){return this._getFrame(this._currentPage)==Math.floor(this.showPageNumber/2)},isLastFrame:function(){return this._getFrame(this._currentPage)==this._frames-Math.ceil(this.showPageNumber/2)},next:function(){if(this._isPageLock)return!1;var e=this._currentPage;this.isLastPage()?!0===this.isCircularly&&(this._switchBlock(),e=0):e++,this.pageTo(e)},prev:function(){if(this._isPageLock)return!1;var e=this._currentPage;this.isFirstPage()?!0===this.isCircularly&&(this._switchBlock(),e=this._pages-1):e--,this.pageTo(e)},_switchBlock:function(){this.isCircularly&&(this._activeBlock=this._isFirstBlock()?this._secondBlock:this._firstBlock)},_isFirstBlock:function(){return this._activeBlock==this._firstBlock},play:function(){if(this._intervalId)return!1;this._intervalId=setInterval(a.bind(this,this.next),this.interval)},stop:function(){if(!this._intervalId)return!1;clearInterval(this._intervalId),delete this._intervalId},replay:function(){this.stop(),this.play()},refresh:function(e){a.apply(this,e),this._applyStyle();if(this.isCircularly){if(this._activeBlock=this._secondBlock,this._currentFrame=this._getFrame(this._currentPage),this._currentFrame<=Math.floor(this.showPageNumber/2)||this._currentFrame>=this._frames-Math.ceil(this.showPageNumber/2))this._switchBlock(),this.resetTo(this._currentPage)}else this.resetTo(this._currentPage)},pageTo:function(e){var t=this._getFrame(e),n=this._endX-this._startX;if(this._currentFrame!==t&&0!==parseInt(this._wrapper.style[JS_TRANSITION_DURATION]))this._isPageLock=this._isTouchLock=!0;else if(this._currentFrame==t&&0==n)return this._isPageLock=this._isTouchLock=!1;this._currentPage=e,this._currentFrame=t,this._move(-(this._currentFrame*this.pageWidth))},resetTo:function(e){this._wrapper.style[JS_TRANSITION]=null,this._wrapper.style[JS_TRANSITION_DURATION]=0,this.pageTo(e);var t=this;setTimeout(function(){t._wrapper.style[JS_TRANSITION_DURATION]=t.speed+"ms"},10)},getPage:function(){return this._currentPage},setIndicator:function(e){this._indicator=e},_getFrame:function(e){return this.isCircularly?this._isFirstBlock()?e:e+this._pages:e},_move:function(e){"h"===this.direction?a.move(this._wrapper,e,0):a.move(this._wrapper,0,e)},_bindEvent:function(){var e="ontouchstart"in window?"touchstart":"mousedown",t="ontouchmove"in window?"touchmove":"mousemove",n="ontouchend"in window?"touchend":"mouseup";this.isTouchMove&&(this._el.addEventListener(e,a.bind(this,this._touchstartHandler),!1),this._el.addEventListener(t,a.bind(this,this._touchmoveHandler),!1),this._el.addEventListener(n,a.bind(this,this._touchendHandler),!1)),this._wrapper.addEventListener(TRANSITION_END,a.bind(this,this._transitionEndHandler),!1)},_touchstartHandler:function(e){if(!0===this._isTouchLock)return!1;this._status=n.status.TOUCH,this.isAutoPlay&&this.stop(),this._startX=this._endX=e.touches?e.touches[0].clientX:e.clientX,this._startY=this._endY=e.touches?e.touches[0].clientY:e.clientY,this._moveStartTime=e.timeStamp||Date.now()},_touchmoveHandler:function(e){if(this._status!=n.status.TOUCH)return!1;var t=e.touches?e.touches[0].clientX:e.clientX,r=t-this._startX;this._endX=t,this._endY=e.touches?e.touches[0].clientY:e.clientY;if(Math.abs(this._endY-this._startY)>Math.abs(r))return this._endX=this._startX,!1;if(!0!==this.isCircularly&&(this.isFirstPage()&&0<r||this.isLastPage()&&0>r))return!1;this._wrapper.style[JS_TRANSITION]=null,this._wrapper.style[JS_TRANSITION_DURATION]=0,this._move(1.2*r-this._currentFrame*this.pageWidth),e.preventDefault()},_touchendHandler:function(e){var t,r=this;t=this._endX-this._startX,e=(e.timeStamp||Date.now())-this._moveStartTime,e=0!=t?400>e?e/Math.abs(t)*(this.pageWidth-Math.abs(t)):this.speed:this.speed;if(this._status!=n.status.TOUCH)return!1;this._status=n.status.TOUCH_END,this.isAutoPlay&&this.play(),Math.abs(t)>n.MIN_MOVEMENT?0<t?this.prev():this.next():this.pageTo(this._currentPage),setTimeout(function(){r._transitionEndHandler()},100)},_transitionEndHandler:function(){this._wrapper.style[JS_TRANSITION_DURATION]=this.speed+"ms",this._isPageLock=this._isTouchLock=!1,a.bind(this,this.onScrollEnd)(),!0!==this.isCircularly&&!0===this.isAutoPlay&&(this.isFirstPage()?this.play():this.isLastPage()&&this.stop()),this.isCircularly&&(this.isFirstFrame()?this._reachFirstFrame():this.isLastFrame()&&this._reachLastFrame()),this._indicator&&this._indicator.active(this._currentPage)},_reachFirstFrame:function(){this._switchBlock(),this.resetTo(this._currentPage)},_reachLastFrame:function(){this._switchBlock(),this.resetTo(this._currentPage)}},r.create=function(e){return new r(e.id,e.size,e.activeClassName||"active",e.controllable)},r.prototype={active:function(e){this._activeItem&&a.removeClass(this._activeItem,this._activeClassName),this._activeItem=this._items[e],a.addClass(this._activeItem,this._activeClassName)},clickHandler:function(e){e=this._items.indexOf(e.target),-1<e&&this.fire("change",e)}},t.IFengSlide=n,s.DEFAULT_CONFIG={isFixed:!0,isAutoPlay:!1,hasScrollTransition:!1,isInitActive:!1,useTransition:!0,activedStopTime:1e3,animateDuation:1e3,animateFunciton:"ease-in-out",animateProperty:"height",toggleClass:"active",closeBtnClass:"btnClose",wrapperClass:"wrapper",onStart:function(){},onScroll:function(){},onWrapperClk:function(){},onClose:function(){},onActive:function(){},onPassive:function(){}},s.prototype={_init:function(){this._initTop=this._el.offsetTop,this.onStart(),this._isActive=this.isInitActive,this._transitionLock=!1},_applyStyle:function(){this.useTransition&&a.setTransition(this._wrapper,this.animateProperty,this.animateDuation,this.animateFunciton),this.isAutoPlay&&!this.isAutoPlayDone&&(this.wrapperToggle(),this.useTransition&&(this._transitionLock=!0),this.isAutoPlayDone=!1),this.isFixed&&this.hasScrollTransition&&(new u,a.listen(window,"scrollend",a.bind(this,this._scrollEndHandler)))},_listener:function(){a.listen(this._wrapper,TRANSITION_END,a.bind(this,this._transitionEndHandler))},_scrollHandler:function(){this.isFixed&&(this.hasScrollTransition||a.move(this._el,0,a.getPosition().y)),this.onScroll()},_scrollEndHandler:function(){this.isFixed&&this.hasScrollTransition&&(a.setTransition(this._el,CSS_TRANSFORM,500),a.move(this._el,0,a.getPosition().y))},_wrapperClkHandler:function(e){if(this.useTransition&&this._transitionLock)return!1;this.onWrapperClk(e),e.preventDefault()},_closeClkHandler:function(e){e.preventDefault(),this._el.style.display="none",this.onClose(this._el)},refresh:function(e){a.apply(this,e),this._applyStyle()},getEl:function(){return this._el},getWrapper:function(){return this._wrapper},getCloseBtn:function(){return this._btnClose},replaceToClass:function(e){return this._el.className=e},wrapperToggle:function(){this.useTransition&&(this._transitionLock=!0),a.hasClass(this._el,this.toggleClass)?a.removeClass(this._el,this.toggleClass):a.addClass(this._el,this.toggleClass)},isActive:function(){return this._isActive},setActive:function(e){this._isActive=e},isTransitionLock:function(){return this._transitionLock},hasAutoPlayed:function(){return this.isAutoPlayDone},_transitionEndHandler:function(){this.isAutoPlay&&!this.isAutoPlayDone&&a.hasClass(this._el,this.toggleClass)?setTimeout(a.bind(this,this.wrapperToggle),this.activedStopTime):this.isAutoPlay&&!this.isAutoPlayDone&&!a.hasClass(this._el,this.toggleClass)&&(this.isAutoPlayDone=!0),this._isActive=this._isActive?!1:!0,a.hasClass(this._el,this.toggleClass)&&this.onActive(),!a.hasClass(this._el,this.toggleClass)&&this.onPassive(),this.useTransition&&(this._transitionLock=!1)}},t.AdBlock=s,o.DEFAULT_CONFIG={maxRetryTimes:10,interval:200,callback:null},o.prototype={_init:function(e){a.apply(this,e||{},o.DEFAULT_CONFIG),this._docWidth=e.clientWidth||document.body.clientWidth,this._retryTimes=0,this._start()},_start:function(){var e=this;setTimeout(function(){e._detect()},this.interval)},_detect:function(){var e=this;this._retryTimes<this.maxRetryTimes&&(this._retryTimes++,this._docWidth!=document.body.clientWidth?this._notify():this._retryTimes<this.maxRetryTimes?setTimeout(function(){e._detect()},this.interval):this._notify())},_notify:function(){if(this.callback)this.callback();else{var e=document.createEvent("Event");e.initEvent("deviceready",!1,!0),window.dispatchEvent(e)}}},t.ScreenReadyDetector=o,u.DEFAULT_CONFIG={timeout:250},u.prototype={_init:function(e){a.apply(this,e||{},u.DEFAULT_CONFIG),a.listen(window,"scroll",a.bind(this,this._detect)),this._timer=null,this._detect()},_detect:function(){var e=this,t=0,n=a.getPosition().y;this._timer=setTimeout(function(){t=a.getPosition().y;if(t==n){var r=document.createEvent("Event");r.initEvent("scrollend",!1,!0),window.dispatchEvent(r),clearTimeout(e._timer)}},this.timeout)}},t.ScrollEndDetector=u})