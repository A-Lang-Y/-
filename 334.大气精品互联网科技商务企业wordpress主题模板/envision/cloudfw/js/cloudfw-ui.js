var CloudFw_UI,CloudFw_UI_Data={id:"",data:{}};!function(a){"use strict";CloudFw_UI={call:function(a,b){return"function"==typeof a?a.apply(this,b):a},track:function(b){var c=b.attr("id"),d=setInterval(function(){CloudFw_UI_Data.data=a(":input",b).serialize(),CloudFw_UI_Data.id=c,window.onbeforeunload=CloudFw_UI.unloadPage,b.bind("ajaxCallback",function(){CloudFw_UI_Data.data=a(":input",b).serialize()}),clearInterval(d)},10)},unloadPage:function(){return a(":input","#"+CloudFw_UI_Data.id).serialize()!=CloudFw_UI_Data.data?"Unsaved changes will be lost. Really continue?":void 0},sure:{option:{},defaults:{destroy:!0,overlay:!1,height_limit:!1,close_on_resume:!0,compact:!0,id:"cloudfw-box-sure",title:"Are you sure?",texts:{sure:"Delete",cancel:"Cancel"},message:{resuming:""},button_color:{sure:"red",cancel:"grey"},content:"",resume:function(){},load:function(){},cancel:function(){},width:300},init:function(b){CloudFw_UI.sure.option=a.extend(!0,this.defaults,b),CloudFw_UI.sure.option.content&&(CloudFw_UI.sure.option.content='<div class="cloudfw-ui-sure-message">'+CloudFw_UI.sure.option.content+"</div>");var c=' 					<div class="cloudfw-ui-sure"> 						'+CloudFw_UI.sure.option.content+' 						<div class="clear" style="margin-top: 0;"></div> 						<div style="float:left;"> 							<a id="cloudfw-ui-sure-resume" href="javascript:;" class="small-button small-'+CloudFw_UI.sure.option.button_color.sure+' run-the-proceed"> 								<span>'+CloudFw_UI.sure.option.texts.sure+'</span> 							</a> 						</div> 						<div style="float:right; margin-right: -15px;"> 							<a id="cloudfw-ui-sure-not" href="javascript:;" class="small-button small-'+CloudFw_UI.sure.option.button_color.cancel+'"> 								<span>'+CloudFw_UI.sure.option.texts.cancel+'</span> 							</a> 						</div> 						<div class="clear"></div> 					</div> 								',d=CloudFw_UI.modal({destroy:!1,overlay:CloudFw_UI.sure.option.overlay,minimize:!1,compact:CloudFw_UI.sure.option.compact,height_limit:CloudFw_UI.sure.option.height_limit,id:CloudFw_UI.sure.option.id,"class":"cloudfw-box-sure",title:CloudFw_UI.sure.option.title,loader:!1,width:CloudFw_UI.sure.option.width,content:function(){}});"function"!=typeof CloudFw_UI.sure.option.cancel&&(CloudFw_UI.sure.option.cancel=function(a){a.close()});var e=d.get();d.success(c),CloudFw_UI.call(CloudFw_UI.sure.option.load,[d,CloudFw_UI.sure.option]),a("#cloudfw-ui-sure-resume",e).focus().fadeTo(200,.3).delay(50).fadeTo(200,1).on("click",function(){CloudFw_UI.sure.option.message.resuming&&a(this).find("span").text(CloudFw_UI.sure.option.message.resuming),CloudFw_UI.call(CloudFw_UI.sure.option.resume,[d,CloudFw_UI.sure.option]),CloudFw_UI.sure.option.close_on_resume&&d.close()}),a("#cloudfw-ui-sure-not",e).on("click",function(){CloudFw_UI.call(CloudFw_UI.sure.option.cancel,[d,CloudFw_UI.sure.option])})}}}}(jQuery),function(a){var e="__sending",f=function(b,c){this.e=b,this.element=a(b),this.options=c,this.metadata=this.element.data("cloudfw-ui-options")};f.prototype={defaults:{type:"",classes:{"default":"small-sky",success:"small-green",error:"small-red"}},init:function(){return this.option=a.extend({},this.defaults,this.options,this.metadata),this.start(),this},start:function(){var a=this;if(a.type().get_color(),a.element.hasClass("working"))return!0;a.element.addClass("working");var b=this.element.parents("form").first(),c=this.element.attr("data-send-text");a.option.color_class&&(a.option.classes.default=a.option.color_class),b.addClass("disabled"),c||(c=CloudFwOp.textSending),"a"==a.option.type?a.element.attr("data-old-val",a.element.children().text()).children().html(c).parent().fadeTo(200,.5):"input"==a.option.type&&a.element.attr("data-old-val",a.element.val()).val(c).parent("div").fadeTo(200,.5)},success:function(){var a=this,b=a.element.parents("form").first(),c=a.element.attr("data-ok-text");c||(c=CloudFwOp.textSaved),"a"==a.option.type?a.element.children().html(c).parent().removeClass(a.option.classes.default).addClass(a.option.classes.success).fadeTo(200,1):"input"==a.option.type&&a.element.val(c).parent("div").removeClass(a.option.classes.default).addClass(a.option.classes.success).fadeTo(200,1);var d=setInterval(function(){"a"==a.option.type?a.element.children().html(a.element.attr("data-old-val")).removeAttr("data-old-val","").parent().removeClass(a.option.classes.success).addClass(a.option.classes.default):"input"==a.option.type&&a.element.val(a.element.attr("data-old-val")).removeAttr("data-old-val").parent("div").removeClass(a.option.classes.success).addClass(a.option.classes.default),b.removeClass("disabled"),a.element.removeClass("working"),clearInterval(d)},2e3)},error:function(a){var b=this,c=b.element.parents("form").first(),d=a||b.element.attr("data-error-text");d||(d=CloudFwOp.textError),"a"==b.option.type?b.element.children().html(d).parent().removeClass(b.option.classes.default).addClass(b.option.classes.error).fadeTo(200,1):"input"==b.option.type&&b.element.val(d).parent("div").removeClass(b.option.classes.default).addClass(b.option.classes.error).fadeTo(200,1);var e=setInterval(function(){"a"==b.option.type?b.element.children().html(b.element.attr("data-old-val")).removeAttr("data-old-val","").parent().removeClass(b.option.classes.error).addClass(b.option.classes.default):"input"==b.option.type&&b.element.val(b.element.attr("data-old-val")).removeAttr("data-old-val").parent("div").removeClass(b.option.classes.error).addClass(b.option.classes.default),c.removeClass("disabled"),b.element.removeClass("working"),clearInterval(e)},5e3)},type:function(){var a;return a=this.element.is("a")?"a":this.element.is("input")||this.element.is("button")?"input":"a",this.option.type=a,this},get_color:function(){var a;if("a"==this.option.type?a=this.element.attr("class"):"input"==this.option.type&&(a=this.element.parent("div").attr("class")),console.log(this.option.type),a)for(var b=a.split(/\s+/),c=0;c<b.length;++c)if("small-"===b[c].substr(0,6)&&"small-button"!=b[c])return this.option.color_class=b[c],this;return this}},f.defaults=f.prototype.defaults,a.fn[e]=function(b){var d,c=typeof b;return this.first().each(function(){"string"==c?(d=a.data(this,"plugin_"+e),d[b]()):(d=a.data(this,"plugin_"+e),d=d?a.data(this,"plugin_"+e):a.data(this,"plugin_"+e,new f(this,b)),d.init())}),d}}(jQuery,window,document),function(a){var e="modal",f=function(b,c){this.e=b,this.element=a(b),this.options=c,this.metadata=this.element.data("cloudfw-ui-options")};f.prototype={defaults:{destroy:!1,overlay:!1,minimize:!0,height_limit:!0,compact:!1,dummy:!1,width:"",id:"",title:"CloudFw Modal Box",content:function(){},before_close:function(){},toolbar:""},init:function(){return this.option=a.extend({},this.defaults,this.options,this.metadata),this.generate(),this},get:function(){return this.element},loading:function(b){"show"==b?(a(".cloudfw-ui-modal-box-loading",this.element).show(),a(".cloudfw-ui-modal-box-content",this.element).hide()):(a(".cloudfw-ui-modal-box-loading",this.element).hide(),a(".cloudfw-ui-modal-box-content",this.element).show())},success:function(b){this.loading("hide"),a(".cloudfw-ui-modal-box-content",this.element).html(b),this.option.dummy&&a(".cloudfw-ui-modal-box-content",this.element).wrapInner('<form action="#" class="cloudfw-dummy-form" />')},cancel:function(b){this.loading("hide"),b&&a(".cloudfw-ui-modal-box-content",this.element).html(b)},close:function(){a(".cloudfw-ui-modal-box-header-close .close",this.element).click()},toolbar_option:function(b){a(".cloudfw-ui-modal-box-header-options",this.element).remove(),a(".cloudfw-ui-modal-box-header-title",this.element).after(a("<div/>").addClass("cloudfw-ui-modal-box-header-options").html(b))},generate:function(){var b=this;b.option.destroy===!0?a(".cloudfw-ui-modal-box-header-close .close").click():b.option.destroy&&(("object"!=typeof b.option.destroy||"undefined"==typeof b.option.destroy.jquery)&&(b.option.destroy=a(""+b.option.destroy)),b.option.destroy.find(".cloudfw-ui-modal-box-header-close .close").click());var c=this.element.hasClass("generated");if(c)this.element.removeClass("closedSection"),this.element.css({top:"",bottom:"",left:"",right:""}),cloudfw_destroy();else{this.element.addClass("generated"),b.option.overlay&&(modal_overlay=a("<div/>").addClass("cloudfw-ui-modal-overlay").appendTo("body").show());var d=b.element;modal_header_html='<div class="cloudfw-ui-modal-box-header"> 						<div class="cloudfw-ui-modal-box-header-title"><strong>'+b.option.title+"</strong></div> 				",b.option.minimize&&(modal_header_html+=' 							<div class="cloudfw-ui-modal-box-header-minimize"><a href="javascript:;" class="minimize wrapIconSection"><span></span></a></div> 					'),modal_header_html+=' 						<div class="cloudfw-ui-modal-box-header-close"><a href="javascript:;" class="close wrapIconSection"><span></span></a></div> 				',modal_header_html+="</div>",d.html(modal_header_html),modal_content_html="",modal_content=a("<div/>").addClass("cloudfw-ui-modal-box-content postbox").html(modal_content_html).appendTo(d),modal_header=d.find(".cloudfw-ui-modal-box-header"),b.option.compact&&d.addClass("modal-compact"),b.option.class&&d.addClass(b.option.class),b.option.width&&(modal_content.css({width:b.option.width}),d.css({marginLeft:-(d.width()/2)})),b.option.height_limit&&modal_content.addClass("limit"),d.draggable({handle:d.find(".cloudfw-ui-modal-box-header"),start:function(){var d=a(this);d.css("bottom","auto").css("right","auto")}}),modal_header.find("a.minimize").unbind("click").bind("click",function(){var c=a(this).parents(".cloudfw-ui-modal-box").first(),d=a(".cloudfw-ui-modal-box-content",c),e=a(".cloudfw-ui-modal-overlay");c.hasClass("closedSection")?(d.slideDown(),b.option.overlay&&e.hide().fadeTo(500,.8,function(){a(this).show()}),c.removeClass("closedSection")):(d.slideUp(),b.option.overlay&&e.fadeOut(function(){a(this).hide()}),c.addClass("closedSection")),cloudfw_destroy()}),modal_header.find("a.close").unbind("click").bind("click",function(){b.option.before_close&&CloudFw_UI.call(b.option.before_close,[d,modal_content]),d.remove(),b.option.overlay&&modal_overlay.fadeOut(function(){a(this).remove()}),a.removeData(b.e,"cloudfw_plugin_"+e),a.removeData(b.e),cloudfw_destroy()}),b.option.loader&&(modal_loader=a("<div />").addClass("cloudfw-ui-modal-box-loading").addClass("loading"),modal_content.after(modal_loader),this.loading("show"),modal_loader.css({width:b.option.width}),d.css({marginLeft:-(d.width()/2)})),b.option.content&&CloudFw_UI.call(this.option.content,[d,modal_content,b])}return this.element}};var g=function(){a(".cloudfw-ui-modal-box-header-close .close").click()};f.defaults=f.prototype.defaults,CloudFw_UI[e]=function(b){var d,c=typeof b,h=a("#"+b.id),i=h.length;return"string"==c?d?d[b]():"destroy"==b&&g():(i||(h=a("<div/>").attr("id",b.id).addClass("cloudfw-ui-modal-box").appendTo("body")),d=a.data(h[0],"cloudfw_plugin_"+e),d=d?a.data(h[0],"cloudfw_plugin_"+e):a.data(h[0],"cloudfw_plugin_"+e,new f(h[0],b)),d.init()),d}}(jQuery,window,document);