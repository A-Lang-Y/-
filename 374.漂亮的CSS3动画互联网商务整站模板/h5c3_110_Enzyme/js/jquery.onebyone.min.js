/* 
	Author: http://codecanyon.net/user/sike
*/
;(function($){var easeTypeArr=['rollIn','fadeIn','fadeInUp','fadeInDown','fadeInLeft','fadeInRight','fadeInRight','bounceIn','bounceInDown','bounceInUp','bounceInLeft','bounceInRight','rotateIn','rotateInDownLeft','rotateInDownRight','rotateInUpLeft','rotateInUpRight','fadeInLeftBig','fadeInRightBig','fadeInUpBig','fadeInDownBig','flipInX','flipInY','lightSpeedIn'];var easeTypeNum=easeTypeArr.length;$.fn.oneByOne=function(options){var settings={className:'oneByOne',sliderClassName:'oneByOne_item',pauseByHover:true,easeType:'fadeInLeft',width:960,height:420,minWidth:480,delay:300,tolerance:0.25,enableDrag:true,showArrow:true,showButton:true,slideShow:false,slideShowDelay:5000,responsive:false,autoHideButton:true};if(options){$.extend(settings,options)}var parent;var _this;var currentBannerNum=-1;var bannerWidth=settings.width;var bannerHeight=settings.height;var _origWidth=bannerWidth;var _origHeight=bannerHeight;var xdiff=0;var isMouseDown=false;var isTweenning=false;var realEaseTypeArr=[];var _easeType;var bannerArr=[];var bannerNum=0;var _preBannerNum=0,buttonArea,buttonCon,arrowButton;var isPlaying=false;_this=this;_this.wrap('<div class="'+settings.className+'"/>');parent=_this.parent();parent.css('overflow','hidden');_this.find('.'+settings.sliderClassName).each(function(index){$(this).hide();bannerNum++;$(this).css('left',bannerWidth*index);bannerArr[index]=$(this)});_this.find(".oneByOne_item img").each(function(){$(this).bind('dragstart',function(event){event.preventDefault()})});_this.bind('touchstart',function(event){var touch=event.originalEvent.touches[0]||event.originalEvent.changedTouches[0];if(!isMouseDown){isMouseDown=true;this.mouseX=touch.pageX}if(buttonCon)buttonCon.fadeIn();if(arrowButton&&_currentWidth>settings.minWidth)arrowButton.fadeIn()});_this.bind('touchmove',function(event){var touch=event.originalEvent.touches[0]||event.originalEvent.changedTouches[0];if(isMouseDown){xdiff=touch.pageX-this.mouseX;_this.css('left',-currentBannerNum*bannerWidth+xdiff);if(settings.slideShow){stopSlideShow()}}return false});_this.bind('touchend',function(event){var _n=currentBannerNum;var touch=event.originalEvent.touches[0]||event.originalEvent.changedTouches[0];isMouseDown=false;if(!xdiff)return false;var fullWidth=_currentWidth||parseInt(settings.width);var halfWidth=fullWidth/2;if(-xdiff>halfWidth-fullWidth*settings.tolerance){_n++;_n=_n>=bannerNum?bannerNum-1:_n;tweenTo(_n)}else if(xdiff>halfWidth-fullWidth*settings.tolerance){_n--;_n=_n<0?0:_n;tweenTo(_n)}else{tweenTo(_n);if(settings.slideShow){startSlideShow()}}xdiff=0;if(buttonCon)buttonCon.delay(400).fadeOut();if(arrowButton&&settings.autoHideButton)arrowButton.delay(400).fadeOut();return false});if(settings.enableDrag){_this.mousedown(function(event){if(!isMouseDown){isMouseDown=true;this.mouseX=event.pageX}});_this.mousemove(function(event){if(isMouseDown){xdiff=event.pageX-this.mouseX;_this.css('left',-currentBannerNum*bannerWidth+xdiff);if(settings.slideShow){stopSlideShow()}}return false});_this.mouseup(function(event){isMouseDown=false;var _n=currentBannerNum;if(!xdiff)return false;var fullWidth=_currentWidth||parseInt(settings.width);var halfWidth=fullWidth/2;if(-xdiff>halfWidth-fullWidth*settings.tolerance){_n++;_n=_n>=bannerNum?bannerNum-1:_n;tweenTo(_n)}else if(xdiff>halfWidth-fullWidth*settings.tolerance){_n--;_n=_n<0?0:_n;tweenTo(_n)}else{tweenTo(_n);if(settings.slideShow){startSlideShow()}}xdiff=0;return false});_this.mouseleave(function(event){$(this).mouseup()})}parent.mouseover(function(event){if(arrowButton&&_currentWidth>settings.minWidth)arrowButton.fadeIn();if(settings.pauseByHover){stopSlideShow();isPlaying=false}});parent.mouseleave(function(event){if(arrowButton&&settings.autoHideButton)arrowButton.fadeOut();if(settings.pauseByHover&&settings.slideShow){startSlideShow();isPlaying=true}});if(settings.showButton){buttonArea=$('<div class="buttonArea"><div class="buttonCon"></div></div>');parent.append(buttonArea);buttonCon=buttonArea.find('.buttonCon');for(var i=0;i<bannerNum;i++){buttonCon.append('<a class="theButton" rel="'+i+'">'+(i+1)+'</a>').css('cursor','pointer')}$('.buttonCon a',buttonArea).bind('click',function(event){if($(this).hasClass('active'))return false;var _n=$(this).attr('rel');tweenTo(_n)})}if(settings.showArrow){arrowButton=$('<div class="arrowButton"><div class="prevArrow"></div><div class="nextArrow"></div></div>');parent.append(arrowButton);var _next=$('.nextArrow',arrowButton).bind('click',function(event){nextBanner()});var _prev=$('.prevArrow',arrowButton).bind('click',function(event){prevBanner()})}if(arrowButton&&settings.autoHideButton)arrowButton.hide();tweenTo(0);if(settings.slideShow){slideShowInt=setInterval(function(){nextBanner()},settings.slideShowDelay);_this.data('interval',slideShowInt);isPlaying=true}function tweenTo(n){if(settings.slideShow){stopSlideShow()}var __n=parseFloat(n)+1;var imgSrc=$(".oneByOne_item#slide-"+((n>=10)?"":"0")+__n).data("bg");if(typeof imgSrc!="undefined"){$(".slug-pattern").prepend("<div class='background-image' style='background-image:url("+imgSrc+");background-scroll:scroll;z-index:1' id='"+__n+"'></div>");$(".slug-pattern .background-image").each(function(){if($(this).attr("ID")!=__n)$(this).fadeOut(1000,function(){$(this).remove()})})}_this.stop(true,true).animate({left:-n*bannerWidth},settings.delay,function(){if(n!=currentBannerNum){_preBannerNum=currentBannerNum;if(bannerArr[_preBannerNum]){if(!($.browser.msie||$.browser.opera)){bannerArr[_preBannerNum].fadeOut()}if($.browser.msie&&$.browser.version<=9){bannerArr[_preBannerNum].children().each(function(index){$(this).css('opacity',0)})}$('.buttonArea a:eq('+_preBannerNum+')',parent).removeClass('active')}$('.buttonArea a:eq('+n+')',parent).addClass('active');if(settings.easeType.toLowerCase()!="random"){bannerArr[n].show().children().each(function(index){var _n=index;var _item=$(this);var _existClass="";var _isClassed=false;if($(this).hasClass(settings.easeType)){$(this).removeClass(settings.easeType);$(this).hide()}if(_item.data('animate')){_isClassed=true;_existClass=_item.data('animate');_item.removeClass(_existClass);_item.hide()}if($.browser.msie&&$.browser.version<=9){_item.css('opacity',0);_item.show().animate({opacity:1},200+200*_n)}else{if(_isClassed){_item.show().addClass("animate"+_n+" "+_existClass)}else{_item.show().addClass("animate"+_n+" "+settings.easeType)}if(settings.responsive&&_currentWidth<settings.minWidth&&!$(this).is('img'))_item.hide()}})}else{_easeType=easeTypeArr[Math.floor(Math.random()*easeTypeNum)];realEaseTypeArr[n]=_easeType;if(bannerArr[_preBannerNum]){bannerArr[_preBannerNum].children().each(function(index){if($(this).hasClass(realEaseTypeArr[_preBannerNum])){$(this).removeClass(realEaseTypeArr[_preBannerNum]);$(this).hide()}})}bannerArr[n].show().children().each(function(index){var _n=index;var _item=$(this);var _existClass="";var _isClassed=false;if(_item.data('animate')){_isClassed=true;_existClass=_item.data('animate');_item.removeClass(_existClass);_item.hide()}if($.browser.msie&&$.browser.version<=9){_item.css('opacity',0);_item.show().animate({opacity:1},200+200*_n)}else{if(_isClassed){_item.show().addClass("animate"+_n+" "+_existClass)}else{_item.show().addClass("animate"+_n+" "+_easeType)}if(settings.responsive&&_currentWidth<settings.minWidth&&!$(this).is('img'))_item.hide()}})}_this.delay(bannerArr[n].children().length*200).queue(function(){if(settings.slideShow&&isPlaying)startSlideShow()});if(arrowButton)arrowButton.css('cursor','pointer');currentBannerNum=n}})}var _currentWidth=_this.parent().width();if(settings.responsive){_this.parent().css('height',_origHeight*_currentWidth/_origWidth);$(window).load(updateResponsive);$(window).resize(updateResponsive)}function updateResponsive(event){_currentWidth=_this.parent().width();_this.parent().css('height',_origHeight*_currentWidth/_origWidth);_this.find('.'+settings.sliderClassName).each(function(index){$(this).css('height',_origHeight*_currentWidth/_origWidth);if(_currentWidth<settings.minWidth){$(this).find('span').css('display','none');arrowButton.css('display','none')}else{$(this).find('span').css('display','');arrowButton.css('display','')}});if(_next){_next.css('top',_origHeight*_currentWidth/_origWidth*.5-40)}if(_prev){_prev.css('top',_origHeight*_currentWidth/_origWidth*.5-40)}}function stopSlideShow(){clearInterval(_this.data('interval'))}function startSlideShow(){clearInterval(_this.data('interval'));slideShowInt=setInterval(function(){nextBanner()},settings.slideShowDelay);_this.data('interval',slideShowInt)}function nextBanner(){var _n=currentBannerNum;_n++;_n=_n>=bannerNum?0:_n;tweenTo(_n)}function prevBanner(){var _n=currentBannerNum;_n--;_n=_n<0?bannerNum-1:_n;tweenTo(_n)}return this}})(jQuery);